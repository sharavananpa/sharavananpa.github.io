let globalInstanceIndex=0;class HeadingAnchors extends HTMLElement{static register(e){"customElements"in window&&customElements.define(e||"heading-anchors",HeadingAnchors)}static attributes={exclude:"data-ha-exclude",prefix:"prefix",content:"content"};static classes={anchor:"ha",placeholder:"ha-placeholder",srOnly:"ha-visualhide"};static defaultSelector="h2,h3,h4,h5,h6";static css=`\n.${HeadingAnchors.classes.srOnly} {\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\toverflow: hidden;\n\tposition: absolute;\n\twidth: 1px;\n}\n.${HeadingAnchors.classes.anchor} {\n\tposition: absolute;\n\tleft: var(--ha_offsetx);\n\ttop: var(--ha_offsety);\n\ttext-decoration: none;\n\topacity: 0;\n}\n.${HeadingAnchors.classes.placeholder} {\n\topacity: .3;\n}\n.${HeadingAnchors.classes.anchor}:is(:focus-within, :hover) {\n\topacity: 1;\n}\n.${HeadingAnchors.classes.anchor},\n.${HeadingAnchors.classes.placeholder} {\n\tdisplay: inline-block;\n\tpadding: 0 .25em;\n\n\t/* Disable selection of visually hidden label */\n\t-webkit-user-select: none;\n\tuser-select: none;\n}\n\n@supports (anchor-name: none) {\n\t.${HeadingAnchors.classes.anchor} {\n\t\tposition: absolute;\n\t\tleft: anchor(left);\n\t\ttop: anchor(top);\n\t}\n}`;get supports(){return"replaceSync"in CSSStyleSheet.prototype}get supportsAnchorPosition(){return CSS.supports("anchor-name: none")}constructor(){if(super(),!this.supports)return;let e=new CSSStyleSheet;e.replaceSync(HeadingAnchors.css),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e],this.headingStyles={},this.instanceIndex=globalInstanceIndex++}connectedCallback(){this.supports&&this.headings.forEach((e,t)=>{if(!e.hasAttribute(HeadingAnchors.attributes.exclude)){let n=this.getAnchorElement(e),o=this.getPlaceholderElement();if(this.supportsAnchorPosition){let e=`--ha_${this.instanceIndex}_${t}`;o.style.setProperty("anchor-name",e),n.style.positionAnchor=e}e.appendChild(o),e.after(n)}})}positionAnchorFromPlaceholder(e){if(!e)return;let t=e.closest("h1,h2,h3,h4,h5,h6");t.nextElementSibling&&this.positionAnchor(t.nextElementSibling)}positionAnchor(e){if(!e||!e.previousElementSibling)return;let t=e.previousElementSibling;if(this.setFontProp(t,e),this.supportsAnchorPosition)return;let n=t.querySelector(`.${HeadingAnchors.classes.placeholder}`);n&&(e.style.setProperty("--ha_offsetx",`${n.offsetLeft}px`),e.style.setProperty("--ha_offsety",`${n.offsetTop}px`))}setFontProp(e,t){let n=e.querySelector(`.${HeadingAnchors.classes.placeholder}`);if(n){let e=getComputedStyle(n),o=["font-weight","font-size","line-height","font-family"].map(t=>e.getPropertyValue(t));t.style.setProperty("font",`${o[0]} ${o[1]}/${o[2]} ${o[3]}`)}}getAccessibleTextPrefix(){return this.getAttribute(HeadingAnchors.attributes.prefix)||"Jump to section titled"}getContent(){return this.hasAttribute(HeadingAnchors.attributes.content)?this.getAttribute(HeadingAnchors.attributes.content):"#"}getPlaceholderElement(){let e=document.createElement("span");e.setAttribute("aria-hidden",!0),e.classList.add(HeadingAnchors.classes.placeholder);let t=this.getContent();return t&&(e.textContent=t),e.addEventListener("mouseover",e=>{let t=e.target.closest(`.${HeadingAnchors.classes.placeholder}`);t&&this.positionAnchorFromPlaceholder(t)}),e}getAnchorElement(e){let t=document.createElement("a");t.href=`#${e.id}`,t.classList.add(HeadingAnchors.classes.anchor);let n=this.getContent();return t.innerHTML=`<span class="${HeadingAnchors.classes.srOnly}">${this.getAccessibleTextPrefix()}: ${e.textContent}</span>${n?`<span aria-hidden="true">${n}</span>`:""}`,t.addEventListener("focus",e=>{let t=e.target.closest(`.${HeadingAnchors.classes.anchor}`);t&&this.positionAnchor(t)}),t.addEventListener("mouseover",e=>{let t=e.target.closest(`.${HeadingAnchors.classes.anchor}`);this.positionAnchor(t)}),t}get headings(){return this.querySelectorAll(this.selector.split(",").map(e=>`${e.trim()}[id]`))}get selector(){return this.getAttribute("selector")||HeadingAnchors.defaultSelector}}HeadingAnchors.register();export{HeadingAnchors};const accentColors=["#CC3333","#FFB300","#33AA55","#3366CC"];let base64Cache=new Map;function changeFavicon(e){const t=`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 512 512"><path fill="${e}" d="M161.13 4.86v345.96H504L356.29 499.36H10.55V145.7z"/><path fill="${darken(e)}" d="M152.63 10.58h348.8v348.8h-348.8z"/><path fill="#555" d="M152.63 55.01a10.58 10.58 0 0 1-10.58-10.58V10.58a10.58 10.58 0 1 1 21.16 0v33.85c0 5.84-4.74 10.58-10.58 10.58zm0 230.23a10.58 10.58 0 0 1-10.58-10.58v-64.25a10.58 10.58 0 1 1 21.16 0v64.25c0 5.84-4.74 10.58-10.58 10.58zm0-115.11a10.58 10.58 0 0 1-10.58-10.58V95.3a10.58 10.58 0 1 1 21.16 0v64.25c0 5.84-4.74 10.58-10.58 10.58zm33.85 199.82h-33.85a10.58 10.58 0 0 1-10.58-10.58v-33.85a10.58 10.58 0 1 1 21.16 0v23.27h23.27a10.58 10.58 0 1 1 0 21.16zm230.22 0h-64.25a10.58 10.58 0 1 1 0-21.16h64.25a10.58 10.58 0 1 1 0 21.16zm-115.11 0h-64.25a10.58 10.58 0 1 1 0-21.16h64.25a10.58 10.58 0 1 1 0 21.16zm199.83 0h-33.85a10.58 10.58 0 1 1 0-21.16h33.85a10.58 10.58 0 1 1 0 21.16zM10.58 512a10.55 10.55 0 0 1-7.48-3.1 10.58 10.58 0 0 1 0-14.96L27.04 470A10.58 10.58 0 0 1 42 484.96L18.06 508.9a10.55 10.55 0 0 1-7.48 3.1zm72.33-72.33a10.55 10.55 0 0 1-7.48-3.1 10.58 10.58 0 0 1 0-14.96l23.93-23.94a10.58 10.58 0 0 1 14.97 14.96l-23.94 23.94a10.55 10.55 0 0 1-7.48 3.1z"/><path fill="#1a1a1a" d="M501.42 0H152.63a10.58 10.58 0 0 0-7.48 3.1L3.1 145.15a10.55 10.55 0 0 0-3.1 7.48v348.8C0 507.25 4.74 512 10.58 512h348.79a10.55 10.55 0 0 0 7.48-3.1L508.9 366.85a10.58 10.58 0 0 0 3.1-7.48V10.58C512 4.74 507.26 0 501.42 0zM157.01 21.16h318.87L354.99 142.05H36.12zm191.78 469.68H21.15V163.2h327.63v327.63zm21.16-14.96V157L490.84 36.1V355z"/></svg>`,n=document.getElementById("favicon"),o=fnv1aHash(t);if(!base64Cache.has(o)){const e=svgToBase64(t);base64Cache.set(o,e)}n.href=base64Cache.get(o)}function darken(e){let t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return t=Math.max(0,t-31),n=Math.max(0,n-31),o=Math.max(0,o-31),"#"+(1<<24|t<<16|n<<8|o).toString(16).slice(1).toUpperCase()}function fnv1aHash(e){let t=2166136261n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t*=16777619n;return t.toString()}function svgToBase64(e){return`data:image/svg+xml;base64,${btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))}`}function initializeAccentColor(){const e=localStorage.getItem("accentColor"),t=localStorage.getItem("accentColorIndex");if(null!==e&&null!==t)document.body.style.setProperty("--accent-color",e),document.body.style.setProperty("--accent-color-darkened",darken(e)),browserSupport&&changeFavicon(e);else{const e=Math.floor(Math.random()*accentColors.length),t=accentColors[e];document.body.style.setProperty("--accent-color",t),document.body.style.setProperty("--accent-color-darkened",darken(t)),browserSupport&&changeFavicon(t),localStorage.setItem("accentColor",t),localStorage.setItem("accentColorIndex",e)}}function setAccentColor(){let e=0;const t=localStorage.getItem("accentColorIndex");null!==t&&(e=(parseInt(t)+1)%accentColors.length);const n=accentColors[e];document.body.style.setProperty("--accent-color",n),document.body.style.setProperty("--accent-color-darkened",darken(n)),browserSupport&&changeFavicon(n),localStorage.setItem("accentColor",n),localStorage.setItem("accentColorIndex",e)}const userAgent=navigator.userAgent;let browserSupport=!1;(/Chrome/.test(userAgent)||/Firefox/.test(userAgent))&&(browserSupport=!0),window.addEventListener("storage",e=>{"accentColor"===e.key&&(document.body.style.setProperty("--accent-color",e.newValue),document.body.style.setProperty("--accent-color-darkened",darken(e.newValue)),browserSupport&&changeFavicon(e.newValue))}),initializeAccentColor();